import{d as f,r,o as k,u as g,b,f as a,h as j,x,j as t,y as s,z as o,A as v,t as D,p as U,e as y}from"./vendor-GrBDyr5n.js";import{b as V,_ as T}from"./index-CGRNgn_v.js";import"./gsap-CH_iu5NA.js";import"./aos-JupvBk5m.js";const I={class:"apply-container"},N={class:"checkbox"},R={class:"checkbox"},q={key:0,class:"success-message"},S="unban",B=f({__name:"ApplyUnban",setup(C){const w=r(V),d=g(),p=r(!1),m=r(""),n=r({discord:"",steamId:"",serverNick:"",banDate:"",bannedBy:"",banReason:"",events:"",admit:"",change:"",evidence:"",notes:"",consentTruth:!1,consentRules:!1});k(async()=>{const e=await(await fetch("/api/user",{credentials:"include"})).json();e.user&&(n.value.discord=`${e.user.username}#${e.user.id}`);const i=await(await fetch("/api/status?type=unban",{credentials:"include"})).json();if(i.status&&(i.status!=="Negatywnie"||i.reapplyAfter&&Date.now()<i.reapplyAfter)){d.push("/status-unban");return}});async function z(){const u=await fetch("/api/apply",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...n.value,type:S})});if(u.ok){const e=await u.json();p.value=!0,m.value=e.status,d.push("/status-unban")}else u.status===400&&d.push("/status-unban")}return(u,e)=>(y(),b("main",{class:"apply-page",style:U({backgroundImage:`url(${w.value})`})},[e[33]||(e[33]=a("div",{class:"apply-overlay"},null,-1)),a("div",I,[e[32]||(e[32]=a("h1",null,"Wniosek o odbanowanie",-1)),a("form",{onSubmit:x(z,["prevent"]),class:"app-form"},[e[26]||(e[26]=a("h2",null,"1. Dane Gracza",-1)),a("label",null,[e[13]||(e[13]=t(" Nick Discord + ID ")),s(a("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>n.value.discord=l),readonly:""},null,512),[[o,n.value.discord]])]),a("label",null,[e[14]||(e[14]=t(" SteamID ")),s(a("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>n.value.steamId=l),required:"",placeholder:"Twoje SteamID np. 110000112345678"},null,512),[[o,n.value.steamId]])]),a("label",null,[e[15]||(e[15]=t(" Nick na serwerze w momencie bana ")),s(a("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>n.value.serverNick=l),required:"",placeholder:"Twój nick na serwerze"},null,512),[[o,n.value.serverNick]])]),a("label",null,[e[16]||(e[16]=t(" Data bana ")),s(a("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=l=>n.value.banDate=l),required:""},null,512),[[o,n.value.banDate]])]),e[27]||(e[27]=a("h2",null,"2. Szczegóły Bana",-1)),a("label",null,[e[17]||(e[17]=t(" Kto nałożył bana ")),s(a("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>n.value.bannedBy=l),required:"",placeholder:"Nick osoby banującej"},null,512),[[o,n.value.bannedBy]])]),a("label",null,[e[18]||(e[18]=t(" Powód bana ")),s(a("textarea",{"onUpdate:modelValue":e[5]||(e[5]=l=>n.value.banReason=l),required:"",placeholder:"Powód otrzymania bana"},null,512),[[o,n.value.banReason]])]),e[28]||(e[28]=a("h2",null,"3. Wyjaśnienie",-1)),a("label",null,[e[19]||(e[19]=t(" Twoja wersja wydarzeń ")),s(a("textarea",{"onUpdate:modelValue":e[6]||(e[6]=l=>n.value.events=l),required:"",placeholder:"Opisz sytuację swoimi słowami"},null,512),[[o,n.value.events]])]),a("label",null,[e[20]||(e[20]=t(" Czy przyznajesz się do złamania zasad? ")),s(a("textarea",{"onUpdate:modelValue":e[7]||(e[7]=l=>n.value.admit=l),placeholder:"tak / nie + uzasadnienie"},null,512),[[o,n.value.admit]])]),a("label",null,[e[21]||(e[21]=t(" Co zmieniło się od momentu bana? ")),s(a("textarea",{"onUpdate:modelValue":e[8]||(e[8]=l=>n.value.change=l),placeholder:"Czy coś zrozumiałeś, poprawiłeś, wracasz z nowym nastawieniem..."},null,512),[[o,n.value.change]])]),e[29]||(e[29]=a("h2",null,"4. Dodatki (Opcjonalne)",-1)),a("label",null,[e[22]||(e[22]=t(" Dowody/screeny/nagrania ")),s(a("textarea",{"onUpdate:modelValue":e[9]||(e[9]=l=>n.value.evidence=l),placeholder:"Linki do dowodów lub opis"},null,512),[[o,n.value.evidence]])]),a("label",null,[e[23]||(e[23]=t(" Dodatkowe uwagi ")),s(a("textarea",{"onUpdate:modelValue":e[10]||(e[10]=l=>n.value.notes=l),placeholder:"Inne informacje dla administracji"},null,512),[[o,n.value.notes]])]),e[30]||(e[30]=a("h2",null,"5. Zgoda i potwierdzenie",-1)),a("label",N,[s(a("input",{type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=l=>n.value.consentTruth=l),required:""},null,512),[[v,n.value.consentTruth]]),e[24]||(e[24]=t(" Oświadczam, że powyższe dane są zgodne z prawdą "))]),a("label",R,[s(a("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=l=>n.value.consentRules=l),required:""},null,512),[[v,n.value.consentRules]]),e[25]||(e[25]=t(" Zapoznałem się z regulaminem serwera i odwołania od bana "))]),e[31]||(e[31]=a("button",{type:"submit",class:"submit-btn"},"Wyślij podanie",-1))],32),p.value?(y(),b("p",q," Twój wniosek o odbanowanie został wysłany. Obecnie twój wniosek ma status: "+D(m.value),1)):j("",!0)])],4))}}),W=T(B,[["__scopeId","data-v-8cb5bc17"]]);export{W as default};
